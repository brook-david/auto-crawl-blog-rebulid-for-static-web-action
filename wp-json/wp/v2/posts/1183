{"id":1183,"date":"2024-05-15T06:27:16","date_gmt":"2024-05-15T06:27:16","guid":{"rendered":"https:\/\/blog.wanderto.top\/?p=1183"},"modified":"2024-05-15T06:35:20","modified_gmt":"2024-05-15T06:35:20","slug":"nginx-ingress-controller-snippets-configration-lead-to-cluster-network-exception","status":"publish","type":"post","link":"https:\/\/blog.wanderto.top\/2024\/05\/15\/nginx-ingress-controller-snippets-configration-lead-to-cluster-network-exception\/","title":{"rendered":"Nginx-Ingress-Controller Snippets\u914d\u7f6e\u5f15\u8d77\u96c6\u7fa4\u7f51\u7edc\u5f02\u5e38\u8bb0\u5f55"},"content":{"rendered":"\n<h2 class=\"wp-block-heading\">\u524d\u8a00<\/h2>\n\n\n\n<pre class=\"wp-block-preformatted\">\u6628\u5929\u5c1d\u8bd5\u4f7f\u7528Nginx-Ingress-Controller snippets\u505a502\u5f02\u5e38\u8f6c\u53d1\u96c6\u7fa4\u5185\u90e8\u5bb9\u5668\u7684\u670d\u52a1\uff0c\u5bfc\u81f4WordPress Web\u670d\u52a1\u4e00\u76f4\u65e0\u6cd5\u542f\u52a8\uff0c\u5177\u4f53\u8868\u73b0\u4e3a\u65e0\u6cd5\u8fde\u63a5\u5230\u540c\u4e00namespace\u7684WordPress\u6570\u636e\u5e93\uff0c\u65e5\u5fd7\u63d0\u793a\u5bf9\u5e94\u57df\u540d\u65e0\u6cd5\u89e3\u6790\uff1a<\/pre>\n\n\n\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\">wordpress 03:00:54.49 WARN  ==> Hostname my-wordpress-mariadb could not be resolved, this could lead to connection issues<\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\">Snippets\u914d\u7f6e\uff1a<\/pre>\n\n\n\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\">    nginx.org\/server-snippets: |\n      error_page 502 = @fallback;\n      location @fallback {\n        proxy_pass http:\/\/my-static-blog;\n      }<\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u6392\u67e5<\/h2>\n\n\n\n<pre class=\"wp-block-preformatted\">1.POD\u6392\u67e5\uff0c\u7b2c\u4e00\u60f3\u5230\u7684\u662f\u6570\u636e\u5e93\u670d\u52a1\u542f\u52a8\u5931\u8d25\u4e86\uff0c\u670d\u52a1\u57df\u540d\u6ca1\u6ce8\u518c\u5230\u96c6\u7fa4DNS\u4e2d\uff0c\u67e5\u770b\u670d\u52a1\u72b6\u6001\u662frunning,\u670d\u52a1\u65e5\u5fd7\u4e5f\u6ca1\u6709\u4efb\u4f55\u9519\u8bef\uff0c\u6392\u9664!\n\n2.\u7f51\u7edc\u6392\u67e5\uff0c\n  2.1.\u67e5\u770b\u7f51\u7edc\u670d\u52a1\u76f8\u5173pod\u542f\u52a8\u6b63\u5e38\uff0c\u5c1d\u8bd5\u5728\u5bb9\u5668(kubectl run -i -t busybox --image=busybox --restart=Never)\u5185ping\u540cnamespace\u4e0bPOD IP\uff0cping\u4e0d\u901a\uff0c\u670d\u52a1\u540d\u4e5f\u65e0\u6cd5\u89e3\u6790\n  2.2.\u4ecek8s\u63a7\u5236\u8282\u70b9ping\u5bb9\u5668IP\uff0c\u5de5\u4f5c\u8282\u70b9\u7684\u4e0d\u901a\uff0c\u63a7\u5236\u8282\u70b9\u90e8\u7f72\u7684POD\u53ef\u4ee5\u901a\n  2.3.\u6000\u7591\u662f\u96c6\u7fa4DNS\u51fa\u4e86\u95ee\u9898\uff0c\u53d1\u73b0DNS\u4e00\u5171\u6709\u4e24\u4e2a\uff0c\u90fd\u5728\u63a7\u5236\u8282\u70b9\u4e0a\uff0c\u624b\u52a8\u5220\u9664\u4e00\u4e2a\uff0c\u8ba9\u5b83\u81ea\u52a8\u518d\u90e8\u7f72\u5230\u5de5\u4f5c\u8282\u70b9\u4e0a\uff08\u8fd9\u91cc\u4e0d\u592a\u61c2DNS\u5de5\u4f5c\u673a\u5236\u53ea\u662f\u505a\u4e86\u4e00\u4e2a\u5c1d\u8bd5\uff09\u3002\u81ea\u52a8\u90e8\u7f72\u5de5\u4f5c\u8282\u70b9\u5b8c\u6210\u540eWordPress Web\u4e5f\u81ea\u52a8\u90e8\u7f72\u6210\u529f\u4e86\uff0c\u4f46\u662f\u8fd8\u662f\u65e0\u6cd5\u88ab\u6b63\u5e38\u8bbf\u95ee\uff0cIngress\u63d0\u793amy-static-blog\u65e0\u6cd5\u89e3\u6790\n\n3.Ingress\u4fee\u590d\n  3.1.\u63d0\u793amy-static-blog\u65e0\u6cd5\u89e3\u6790\u662f\u56e0\u4e3a\u5728\u90e8\u7f72Ingress\u65f6my-static-blog\u670d\u52a1\u8fd8\u6ca1\u6709\u90e8\u7f72\uff0c\u4e5f\u53ef\u80fd\u662f\u90e8\u7f72\u8fd8\u6ca1\u6ce8\u518c\u5230DNS\u3002\u5c1d\u8bd5\u624b\u52a8\u5220\u9664Ingress\u540e\u518d\u5b89\u88c5\uff0c\u9519\u8bef\u6d88\u5931\uff0c\u63d0\u793a\u627e\u4e0d\u5230\u6307\u5b9a\u7684secret\n  3.2.secret\u662fSSL\u7684\u8bc1\u4e66\uff0c\u7531cert-manager\u63d0\u4f9b\u81ea\u52a8\u6ce8\u518c\u670d\u52a1\u3002\u7531\u4e4b\u524d\u60c5\u51b5\u5224\u65ad\u5927\u6982\u8fd8\u662fDNS\u7684\u95ee\u9898\uff0c\u5bfc\u81f4cert-manager\u51e0\u4e2a\u670d\u52a1\u4e4b\u95f4\u65e0\u6cd5\u6b63\u5e38\u6c9f\u901a\uff0c\u6ca1\u6709\u6b63\u5e38\u751f\u6210secret\n  3.3.\u5c1d\u8bd5\u5220\u9664\u518d\u90e8\u7f72Ingress\u51e0\u6b21\u540e\u8fd8\u662f\u4e00\u6837\u7684\u95ee\u9898\uff0c\u4f46\u662f\u6709\u65f6\u4f1a\u51fa\u73b0my-static-blog\u65e0\u6cd5\u89e3\u6790\u7684\u9519\u8bef\n  3.4.\u8003\u8651\u5230\u4f7f\u7528\u96c6\u7fa4service\u4e0d\u592a\u7a33\u5b9a\uff0c\u4e3amy-static-blog serivce\u6dfb\u52a0\u4e86Ingress\u5e76\u89e3\u6790\u4e00\u4e2a\u4e13\u7528\u7684\u57df\u540dstatic.wanderto.top\uff0c\u91cd\u65b0\u90e8\u7f72\u540e\u6240\u6709\u95ee\u9898\u6d88\u5931\n\n\u95ee\u9898\u70b92\u4e2d\u6240\u6709\u5f02\u5e38\u4e5f\u90fd\u6062\u590d\u4e86\n\n\u4fee\u6539\u540e\uff1a<\/pre>\n\n\n\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\">    nginx.org\/server-snippets: |\n      error_page 502 = @fallback;\n      location @fallback {\n        proxy_pass http:\/\/static.wanderto.top\n      }<\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u603b\u7ed3<\/h2>\n\n\n\n<pre class=\"wp-block-preformatted\">Nginx-Ingress-Controller\u7684\u914d\u7f6e\u6b63\u5e38\u5e94\u8be5\u53ea\u662f\u5f71\u54cd\u5230\u5916\u90e8\u8fdb\u6765\u7684\u6d41\u91cf\uff0c\u8fd9\u6b21\u5f02\u5e38\u5f71\u54cd\u8303\u56f4\u6709\u70b9\u5927\uff0c\uff0c\u6240\u4ee5\u6709\u70b9\u6ca1\u60f3\u5230\uff0c\u800c\u4e14my-static-blog\u80fd\u88ab\u6b63\u5e38\u89e3\u6790\u540e\u96c6\u7fa4\u7684\u95ee\u9898\u4f9d\u7136\u5b58\u5728\uff0c\u7136\u800c\u914d\u7f6e\u5916\u90e8\u57df\u540d\u540e\u7acb\u5373\u5168\u90e8\u6062\u590d\u6b63\u5e38\uff0csnippets\u614e\u7528\uff01<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u524d\u8a00 \u6628\u5929\u5c1d\u8bd5\u4f7f\u7528Nginx-Ingress-Controller snippets\u505a502\u5f02\u5e38\u8f6c\u53d1\u96c6\u7fa4\u5185\u90e8\u5bb9 [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":1133,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"inline_featured_image":false,"site-container-style":"default","site-container-layout":"default","site-sidebar-layout":"default","site-transparent-header":"default","prose-style":"enable","disable-article-header":"default","disable-site-header":"default","disable-site-footer":"default","disable-content-area-spacing":"default","footnotes":""},"categories":[62,33],"tags":[44,45],"_links":{"self":[{"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/posts\/1183"}],"collection":[{"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/comments?post=1183"}],"version-history":[{"count":6,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/posts\/1183\/revisions"}],"predecessor-version":[{"id":1189,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/posts\/1183\/revisions\/1189"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/media\/1133"}],"wp:attachment":[{"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/media?parent=1183"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/categories?post=1183"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.wanderto.top\/wp-json\/wp\/v2\/tags?post=1183"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}